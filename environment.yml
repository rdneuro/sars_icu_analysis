# =============================================================================
# SARS - Brain Connectivity Analysis Library
# =============================================================================
#
# Conda environment for multimodal neuroimaging analysis
# (resting-state fMRI + diffusion MRI)
#
# Usage:
#   conda env create -f environment.yml
#   conda activate sars
#
# Update:
#   conda env update -f environment.yml --prune
#
# Python version:
#   3.11 is required for neurogym >=2.2 (gymnasium-based), which is a
#   dependency of conn2res. Python 3.10 fails to compile neurogym due to
#   the legacy gym==0.21.0 setuptools incompatibility.
#
# PyTorch / CUDA:
#   PyTorch is installed via pip with official CUDA 13.0 wheels.
#   To change CUDA version, edit the --index-url in the pip section:
#     CUDA 12.8  →  https://download.pytorch.org/whl/cu128
#     CPU only   →  https://download.pytorch.org/whl/cpu
#
# Project: SARS-CoV-2 Brain Connectivity Analysis
# Author:  Velho Mago
# Date:    2026-02
# =============================================================================

name: sars
channels:
  - pytorch
  - pyg
  - conda-forge
  - defaults

dependencies:
  # ------------------------------------------
  # Python
  # ------------------------------------------
  - python=3.11

  # ------------------------------------------
  # Core Scientific Computing
  # ------------------------------------------
  - numpy>=1.24
  - scipy>=1.10
  - pandas>=2.0
  - scikit-learn>=1.2

  # ------------------------------------------
  # Visualization
  # ------------------------------------------
  - matplotlib>=3.7
  - seaborn>=0.12
  - plotly>=5.0

  # ------------------------------------------
  # Neuroimaging
  # ------------------------------------------
  - nibabel>=5.0
  - nilearn>=0.10
  - dipy>=1.7

  # ------------------------------------------
  # Graph / Network Analysis
  # ------------------------------------------
  - networkx>=3.0
  - igraph>=0.11                   # python-igraph (backend for leidenalg)
  - leidenalg>=0.10                # Leiden community detection algorithm

  # ------------------------------------------
  # Deep Learning (PyTorch via pip - see pip section)
  # ------------------------------------------
  - pyg>=2.4                       # PyTorch Geometric
  - pytorch-cuda=12.4

  # ------------------------------------------
  # IDE / Interactive Computing
  # ------------------------------------------
  - jupyter>=1.0
  - spyder>=6.0

  # ------------------------------------------
  # Parallel Processing & Utilities
  # ------------------------------------------
  - joblib>=1.2
  - tqdm>=4.65
  - pyyaml>=6.0
  - jinja2>=3.1

  # ------------------------------------------
  # pip-only packages
  # ------------------------------------------
  - pip
  - pip:
      # PyTorch (CUDA 13.0 - official pip wheels)
      #- --index-url https://download.pytorch.org/whl/cu130
      #- torch
      #- torchvision

      # Brain Connectivity Toolbox
      - bctpy>=0.6.0

      # Reservoir Computing
      # neurogym >=2.2 requires Python >=3.11 and gymnasium
      - neurogym>=2.2.0
      - conn2res @ git+https://github.com/netneurolab/conn2res.git
      - reservoirpy>=0.3.0         # Echo State Networks

      # Criticality analysis (power-law fitting)
      - powerlaw>=1.5

      # Timeseries feature extraction
      - tsfresh>=0.20
      - antropy>=0.1.6

      # Diffusion MRI (NODDI via AMICO)
      - dmri-amico>=1.5.0

      # Advanced multiprocessing
      - pathos>=0.3.0

      # PDF report generation
      - fpdf2>=2.7.0
